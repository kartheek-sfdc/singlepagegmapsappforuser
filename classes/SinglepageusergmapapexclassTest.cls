@isTest
public class SinglepageusergmapapexclassTest {
    //Method to pass address and test endpoint
    public static testmethod void testAddressValidate() {
        SingleRequestMock fakeAddrestRecomendationResp = new SingleRequestMock(200,
                                                         'Complete',
                                                         '{"predictions":[{"description":"Golden, CO, USA","matched_substrings":[{"length":4,"offset":0}],"place_id":"ChIJ92xohxKYa4cR3FWAIFRGxhQ","reference":"ChIJ92xohxKYa4cR3FWAIFRGxhQ","structured_formatting":{"main_text":"Golden","main_text_matched_substrings":[{"length":4,"offset":0}],"secondary_text":"CO, USA"},"terms":[{"offset":0,"value":"Golden"},{"offset":8,"value":"CO"},{"offset":12,"value":"USA"}],"types":["locality","political","geocode"]}],"status":"OK"}',
                                                         null);

        SingleRequestMock fakePlaceIdResp = new SingleRequestMock(200,
                                                  'Complete',
                                                  '{"html_attributions":[],"result":{"address_components":[{"long_name":"Golden Gate Bridge","short_name":"Golden Gate Bridge","types":["route"]},{"long_name":"San Francisco","short_name":"SF","types":["locality","political"]},{"long_name":"San Francisco County","short_name":"San Francisco County","types":["administrative_area_level_2","political"]},{"long_name":"California","short_name":"CA","types":["administrative_area_level_1","political"]},{"long_name":"United States","short_name":"US","types":["country","political"]}],"adr_address":"<span class=\"street-address\">Golden Gate Bridge</span>, <span class=\"locality\">San Francisco</span>, <span class=\"region\">CA</span>, <span class=\"country-name\">USA</span>","business_status":"OPERATIONAL","editorial_summary":{"language":"en","overview":"Famed 4,200 ft art deco suspension bridge open to car, bike & foot traffic."},"formatted_address":"Golden Gate Bridge, San Francisco, CA, USA","formatted_phone_number":"(415) 921-5858","geometry":{"location":{"lat":37.8199286,"lng":-122.4782551},"viewport":{"northeast":{"lat":37.84494285,"lng":-122.47297315},"southwest":{"lat":37.79507945,"lng":-122.48379655}}},"icon":"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/generic_business-71.png","icon_background_color":"#7B9EB0","icon_mask_base_uri":"https://maps.gstatic.com/mapfiles/place_api/icons/v2/generic_pinlet","international_phone_number":"+1 415-921-5858","name":"Golden Gate Bridge","photos":[{"height":9000,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/101973705861556060865\">Nilay patel (Skynet)</a>"],"photo_reference":"AfLeUgN0KT1D-AgRvS9KcQnh88je6UdMb9nQFBfH_PpfGOUQHxOk6QdECjY3imCs5zA26PKGZnDRNlmGOyZTvSPdm1i7OH6WHgqNjBXBeMfH3YnRbClh3Pp_Olk2yxSBYOJ-ftWRenHbLqpzOEXrLhhn32K1d9BF7WlzfkeiDvTlw39MM1fb","width":12000},{"height":9000,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/106166765571756890615\">Don H</a>"],"photo_reference":"AfLeUgPZ1YiuD_32L2gBbeTMVp7JIRQ0Y5PQiOf3NzwuC_ZuNuoxy-hivYBZB5lscJy2GiIsNOiXqdTLd9-0vNyC07vf440nj3gfI-17Es5ikd0D4nuL7gwtP-ZEmS-ttUhA39lEFJWJC4NMnBJE6_qEj7bxnO3zis_qaivp19QAmegWrPO6","width":12000},{"height":3000,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/114713845222650706910\">陳中和</a>"],"photo_reference":"AfLeUgNnoeV-lFPcHtCDHW468eTl-M9oc4JxMKOFPx1b9V14sSL8ZnuJ5WLR17SyfmNI7sI9oYmdVpcO1ZW1DBymqZ6x5zezkjiK1KHtxXySxGpC4Wz9Ptsu1qIOmZhNIneJNP-HT7vHrPL57HOwScwxUGBsJlOU9o4DQ6nKj7KgntQw1siW","width":4000},{"height":3024,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/101815320890860408790\">Umakant Kamal</a>"],"photo_reference":"AfLeUgOii5Jk2yy9G-dbkl6w5H2rXAb1g-d2VUMgQm_ZH8hwv0nrMloe5ExP_UiF1IS7qp5yq4UVF3ZTqlt_QsEgNANDALh8DVVPAmQ9_oA7hUdZhBcMNMN6R3fWw0dBOffeK25HAzaTjYJo_SQsQp2PM4Q1N_8al3L0RntKo2gT6qszS7Ai","width":4032},{"height":2992,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/103580918560603357851\">Gladys Alvarez</a>"],"photo_reference":"AfLeUgMHP3Xqo1T_NN8X1m-TqVr-1jhZO5KdH4R_Ua5bZ4loG2lyd8zYXmqMCjGRNzs5Ngz7TnujAzYirZT5ceqDH2eJGqT3IJT38dIi1pP_FDS_j0TFDJwMSVA3pEUvXMgj2z7181eVhd69cYiCivdoAvVC4GGpo_Ed2ZI4YkcoYBYyM0x0","width":2992},{"height":1580,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/110010631924190767973\">Dawen Su</a>"],"photo_reference":"AfLeUgO4z4tJKdM_82LLyW416VRhPzR8Tti6sZh1L1EoJdc9NisRHZpFJ8Q5UXKCAa4HbQVMtk9E7DIF5Mb79MhDDdaV4Fb9yS4a2P7JLcyu8alYS9bk1fw56lro6NA_B_VIjgnsFUsbug_biJz7nO-x9He7PL8kvbcx1BRRYk73HjBMW_78","width":2388},{"height":4032,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/112068989523709683073\">JY Kim</a>"],"photo_reference":"AfLeUgNI8DrMeThzsz-0dRtENVZWo14K5whtruN_gKnKnrhwSZ-E_IlVAY4veX3eeb2LZO4qtNwk7PPNsQFQfE0AsDH1fwJj0DYkHipRioN0FpgTRetUA4VgTbkpVo70BV8H_Vkk0R_muGePoKP_ygoyBBZzPn0lrXAtJkCSGebAa9hDdRAK","width":3024},{"height":7360,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/105034629518296694757\">Kayam Molla</a>"],"photo_reference":"AfLeUgOTE8-aa0Sys8JOjGZdnv9LclX7wFppzHCFsJIlXugsBtH2nKap1JL-DzOR1RqcMnXVWgmtm_lVofKmDVDSJi7-PlYlL_NuJ-pmHyqur6GPgGWzxs7p5aNM_O0Ay3CbPn4u-AG8w2bGtklTnh1POs81fx0JT3hoshxnfChGhZ08NU01","width":4912},{"height":615,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/100457509154924734155\">Ryan Lalani</a>"],"photo_reference":"AfLeUgMzNv5ARAoKlFqjhaEktjxkP5EHaq-vav2S-L91PgUfHKNDLFWRPQ_DT4VckfUwZqdcgAt-i9wADjVqsE1ONobu4cB3OgRFa3hJZBtE-ls6yFzIL1W1l9MDkvZZWNxaw4KkW4slVLpEO1PP7Y_Fz-VUEpdnIcyRwAimHXbIfmbkEjtV","width":828},{"height":558,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/108958783528948363549\">Sharn Crezy</a>"],"photo_reference":"AfLeUgP7wkv1lxzz-VREpjaOz0wWwRHgopwSX6lFvO6VdFmtJg_kcweXP34w3S723ERg1G01meePx3afYFiVx4U1NN_4yCqS65Xj_Zyzr6fdigqGLerUiPd3zX0dorVs9pDTXDEwSvQiXl6EKAYYd5Evly3evyHwlpX-_JpRLbUgIafAhb8","width":828}],"place_id":"ChIJw____96GhYARCVVwg5cT7c0","plus_code":{"compound_code":"RG9C+XM Sausalito, CA, USA","global_code":"849VRG9C+XM"},"rating":4.8,"reference":"ChIJw____96GhYARCVVwg5cT7c0","reviews":[{"author_name":"Abhishek Sohane","author_url":"https://www.google.com/maps/contrib/114404649993560887140/reviews","language":"en","original_language":"en","profile_photo_url":"https://lh3.googleusercontent.com/a-/ACB-R5Tm_fdDgZOLFmxccYfYz3G33fkM75L4c0k2qYQF8Nc=s128-c0x00000000-cc-rp-mo-ba5","rating":4,"relative_time_description":"5 months ago","text":"Its a very awesome scenic spot. Great place to take pictures. The views are awesome. Definitely worth a visit during San Francisco trip. Definitely enjoyed my visit to the bridge.\nEveryone in the family can enjoy. Usually lot of people as it is a famous touristic spot.","time":1664220575,"translated":false},{"author_name":"Roshni Patel","author_url":"https://www.google.com/maps/contrib/101408625346595854690/reviews","language":"en","original_language":"en","profile_photo_url":"https://lh3.googleusercontent.com/a-/ACB-R5RFvSZytvIGrHe9ySIEKDnekh5yNDjMZb-3PaEOkmQ=s128-c0x00000000-cc-rp-mo-ba4","rating":5,"relative_time_description":"a year ago","text":"Beautiful scenic bridge.  I came in January so it was a little breezy, a light jacket would be perfect.  I saw this bridge from so many different angles, unintentionally, and it was breathtaking each time I saw it.  There are many paths to walk/bike, and even with hundreds of people around, you could still enjoy the area without feeling crowded.  I didn\'t walk the bridge because I didn\'t have enough time to do so but there is a walking path if you\'re interested.","time":1642778941,"translated":false},{"author_name":"Arun Chandran","author_url":"https://www.google.com/maps/contrib/104354698393655767116/reviews","language":"en","original_language":"en","profile_photo_url":"https://lh3.googleusercontent.com/a-/ACB-R5RRq0b5uOm3NHP3oG-ATeO07smmhvILRTEWKak-RGg=s128-c0x00000000-cc-rp-mo-ba7","rating":5,"relative_time_description":"5 months ago","text":"Golden Gate Bridge is one of the most breathtaking scenic spots in the world. You can see the bridge from a variety of places. Overlooking the bay from the other side offers the best views.\n\nFew architectural feats are as iconic as this bridge. The bridge is an excellent place for taking pictures. It is much larger than it appears in the photos. You experience the ocean\'s wind as you walk along the bridge.\n\nDepending on the time of year and weather conditions, it is a very different experience.","time":1664849562,"translated":false},{"author_name":"Murali","author_url":"https://www.google.com/maps/contrib/112262242142351567335/reviews","language":"en","original_language":"en","profile_photo_url":"https://lh3.googleusercontent.com/a/AGNmyxZz_chG_5qg6cCuwhQ3MDRK1EcpRANQgZB1CQXT=s128-c0x00000000-cc-rp-mo-ba5","rating":5,"relative_time_description":"8 months ago","text":"Awesome bridge to walk and experience the wind from the Pacific ocean.\n\nGood view of city. Great view of water, islands, boats. Good markings along the walk path. Dedicated lines for bikes.\nInformation about the bridge in many places.\n\nOnly downside is the vehicle passing makes lot of noise.\n\nGood transit options to reach there and returning. Place to park, drop off from taxis.\n\nOverall a great experience walking along the bridge.\n\nA must visit attraction in San Francisco.","time":1656994520,"translated":false},{"author_name":"Askamala Time","author_url":"https://www.google.com/maps/contrib/118184260035030096953/reviews","language":"en","original_language":"en","profile_photo_url":"https://lh3.googleusercontent.com/a-/ACB-R5QdnMcAv0pwRdHKpKiQBCvcSuTKIV96MkWlESqb=s128-c0x00000000-cc-rp-mo-ba3","rating":5,"relative_time_description":"4 months ago","text":"Terrific sight to see!\nMe and my family took a bike ride over the Golden gate Bridge and it was amazing. The weather was very good and nice and warm couldn\'t have been a more perfect day to take a bike ride would greatly advise people to do that! And the view from up there was amazing you could see the beautiful blue ocean!","time":1666367997,"translated":false}],"types":["tourist_attraction","point_of_interest","establishment"],"url":"https://maps.google.com/?cid=14838537888721818889","user_ratings_total":64669,"utc_offset":-420,"vicinity":"Golden Gate Bridge","website":"https://www.goldengate.org/","wheelchair_accessible_entrance":true},"status":"OK"}',
                                                   null);

        SingleRequestMock fakeDistanceResp = new SingleRequestMock(200,
                                                  'Complete',
                                                  '{"destination_addresses" : [ "Times Square, New York, NY 10036, USA" ],"origin_addresses" : [ "Golden Gate Bridge, Golden Gate Bridge, San Francisco, CA, USA" ],"rows" : [{"elements" : [{"distance" : {"text" : "2,915 mi","value" : 4691325},"duration" : {"text" : "1 day 19 hours","value" : 154725},"status" : "OK"}]}],"status" : "OK"}',
                                                   null);

        Map<String, HttpCalloutMock> endpoint2TestResp = new Map<String,HttpCalloutMock>();
        endpoint2TestResp.put('https://maps.googleapis.com/maps/api/place/autocomplete/json?input=gold&key=AIzaSyA7Xv1Wy18pk0S5Up7b4gsZvzut5PZqzxc',fakeAddrestRecomendationResp);
        endpoint2TestResp.put('https://maps.googleapis.com/maps/api/place/details/json?placeid=ChIJw____96GhYARCVVwg5cT7c0&key=AIzaSyA7Xv1Wy18pk0S5Up7b4gsZvzut5PZqzxc',fakePlaceIdResp);
        endpoint2TestResp.put('https://maps.googleapis.com/maps/api/distancematrix/json?origins=37.8199286,-122.4782551&destinations=40.7579747,-73.9855426&mode=driving&sensor=false&language=en&units=imperial&key=AIzaSyA7Xv1Wy18pk0S5Up7b4gsZvzut5PZqzxc',fakeDistanceResp);

        HttpCalloutMock multiCalloutMock =
            	                   new MultiRequestMock(endpoint2TestResp);

        Test.setMock(HttpCalloutMock.class, multiCalloutMock);
        String recomendationResponse = Singlepageusergmapapexclass.getAddressRecommendations('gold');
        String placeIdResponse = Singlepageusergmapapexclass.getAddressDetailsByPlaceId('ChIJw____96GhYARCVVwg5cT7c0');
        list<Singlepageusergmapapexclass.WrapperClass> wcList = Singlepageusergmapapexclass.getAddressDistanceByLng('37.8199286','-122.4782551','40.7579747', '-73.9855426');
        System.assertEquals(wcList[0].distance != null , true , 'get distance value from callout');
        System.assertEquals(wcList[0].drivingCost != null , true , 'get driving cose from callout');
        System.assertEquals(wcList[0].drivingTime != null , true , 'get driving time from callout');
    }
}